#cloud-config

disk_setup:
  /dev/vdb:
    table_type: gpt
    layout: true
    overwrite: true

fs_setup:
- label: zvol
  filesystem: xfs
  device: /dev/vdb
  partition: auto

mounts:
  - [ LABEL=zvol, /test/zvol, xfs, "defaults,context=system_u:object_r:virt_qemu_ga_data_t:s0", "0", "2" ]

bootcmd:
- setsebool -P virt_qemu_ga_run_unconfined on
- setsebool -P virt_qemu_ga_read_nonsecurity_files on
- setsebool -P virt_rw_qemu_ga_data on
- mkdir -p /test/zvol

users:
- name: e2e
  gecos: End-to-End Test User
  sudo: ALL=(ALL) NOPASSWD:ALL
  groups: wheel
  lock_passwd: false
  # echo -n test | mkpasswd -m bcrypt -s
  passwd: $2b$05$Oh13XsRSrGrL/iSvV0Rax.w7rQMx/6lyBTCuaEVXrdh/qiagci9bS
